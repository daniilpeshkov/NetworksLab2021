# NetworksLab2021

## Описание прикладного протокола

Прикладной протокол состоит из двух слоёв: первый слой позволяет упаковать различные данные в одно сообщение, разделив их по тегам. Второй слой — непосредственно то, как сервер использует эти теги (какие данные и в каком формате передаёт под определёнными тегами) — протокол общения.
### Формат сообщения
![Формат сообщения](https://github.com/daniilpeshkov/NetworksLab2021/blob/master/images/simpleTcpMessage.drawio.png)

Каждое сообщение состоит из 1-ого и более кадров. Каждый кадр состоит из заголовка (2 байта) и  данных (от 0 до 255 байт).
Первый байт заголовка содержит флаг hasNext и поле Tag. Флаг hasNext показывает будет ли за этим кадром ещё один или же это конец сообщения. Поле Tag указывает тег передаваемых данных. Несколько кадров могут иметь одинаковый тег — на принимающей стороне эти данные будут последовательно записаны в один буфер.
Второй байт заголовка — DLC (Data Length Code) — длинна данных в текущем кадре в байтах (от 0 до 255). 

### Протокол общения
#### Используемые теги

Протокол определяет 6 используемых тегов:
- TagSys (1)
- TagMessage (2)
- TagFileName (3)
- TagFile (4)
- TagTime (5)
- TagName (6)

Тег TagSys содержит информацию о типе сообщения и прочую системную информацию.
